gen_env:
  cmd: python scripts/gen_env.py
  deps:
  - path: data/default_env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
    size: 3260
  outs:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
gen_observations:
  cmd: python scripts/gen_observations.py
  deps:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  params:
    params.yaml:
      num_observations: 50
      obs_data_set: 1
      target_area: -0.8, 0.7 ; 0.25, 0.99
      true_norm:
        name: default
        exp:
        - Norms
        - - Obl
          - - Moved
            - - Colour
              - r
            - - Shape
              - any
            - - Zone
              - '1'
            - - Next-Move
              - - Colour
                - any
              - - Shape
                - any
          - - Zone
            - '2'
        - - Per
          - - Action
            - putdown
          - - Colour
            - any
          - - Shape
            - square
          - - PerZone
            - '3'
  outs:
  - path: data/observations.pickle
    md5: cbad2e4441200d05bbe6db46c58e1eb6
gen_mcmc_chains:
  cmd: python scripts/gen_mcmc_chains.py
  deps:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  - path: data/observations.pickle
    md5: cbad2e4441200d05bbe6db46c58e1eb6
  params:
    params.yaml:
      colour_specific:
      - r
      - g
      - b
      m: 10
      n: 1000
      rf: 0.6
      shape_specific:
      - square
      - circle
      - triangle
      target_area: -0.8, 0.7 ; 0.25, 0.99
  outs:
  - path: data/chains_and_log_posteriors.pickle
    md5: c6d05742e6aaa7b427df58e07f7abe35
analyse_chains:
  cmd: python scripts/analyse_chains.py
  deps:
  - path: data/chains_and_log_posteriors.pickle
    md5: c6d05742e6aaa7b427df58e07f7abe35
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  - path: data/observations.pickle
    md5: cbad2e4441200d05bbe6db46c58e1eb6
  params:
    params.yaml:
      colour_specific:
      - r
      - g
      - b
      m: 10
      n: 1000
      rf: 0.6
      shape_specific:
      - square
      - circle
      - triangle
      target_area: -0.8, 0.7 ; 0.25, 0.99
  outs:
  - path: metrics/chain_info.txt
    md5: 32e18049476a8474d8d7e6ee98a2b07b
  - path: metrics/chain_posteriors.csv
    md5: cd41fca09f79f598ad20264c73ffc83e
conv_test:
  cmd: python scripts/conv_test.py
  deps:
  - path: data/chains_and_log_posteriors.pickle
    md5: c6d05742e6aaa7b427df58e07f7abe35
  params:
    params.yaml:
      rhat_step_size: 50
  outs:
  - path: data/posterior.pickle
    md5: eceae85c1dd315c89380750df0ae0af7
  - path: metrics/conv_test.txt
    md5: a111df448fc0e0bb7037d11a77989085
extract_top_norms:
  cmd: python scripts/extract_top_norms.py
  deps:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  - path: data/posterior.pickle
    md5: eceae85c1dd315c89380750df0ae0af7
  - path: metrics/chain_posteriors.csv
    md5: cd41fca09f79f598ad20264c73ffc83e
  params:
    params.yaml:
      colour_specific:
      - r
      - g
      - b
      shape_specific:
      - square
      - circle
      - triangle
      target_area: -0.8, 0.7 ; 0.25, 0.99
      true_norm:
        name: default
        exp:
        - Norms
        - - Obl
          - - Moved
            - - Colour
              - r
            - - Shape
              - any
            - - Zone
              - '1'
            - - Next-Move
              - - Colour
                - any
              - - Shape
                - any
          - - Zone
            - '2'
        - - Per
          - - Action
            - putdown
          - - Colour
            - any
          - - Shape
            - square
          - - PerZone
            - '3'
  outs:
  - path: data/top_norms.pickle
    md5: 480b3c4b3f2023169b562047c4aa3979
  - path: metrics/precision_recall.txt
    md5: b146de9e0c82c071904e6ce136c5acfd
test_obs_log_likelihood1:
  cmd: python scripts/test_obs_likelihood.py none true
  deps:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  - path: data/observations.pickle
    md5: cbad2e4441200d05bbe6db46c58e1eb6
  params:
    params.yaml:
      true_norm.exp:
      - Norms
      - - Obl
        - - Moved
          - - Colour
            - r
          - - Shape
            - any
          - - Zone
            - '1'
          - - Next-Move
            - - Colour
              - any
            - - Shape
              - any
        - - Zone
          - '2'
      - - Per
        - - Action
          - putdown
        - - Colour
          - any
        - - Shape
          - square
        - - PerZone
          - '3'
test_obs_log_likelihood2:
  cmd: python scripts/test_obs_likelihood.py top
  deps:
  - path: data/env.pickle
    md5: 9000eb1823d338d732bd357a43f5b1ed
  - path: data/observations.pickle
    md5: 0772d00f8357fc852891427de1690a36
  - path: data/top_norms.pickle
    md5: fc5c7172b3c8b376c5f080ed31cceed9
